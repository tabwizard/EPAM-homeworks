---
- name: create users using a loop
  hosts: all
  tasks:
    - name: create users
      user:
        state: present
        name: "{{ item.name }}"
        home: "{{ item.home }}"
        comment: "{{ item.comment }}"
        password: "{{ item.password }}"
        update_password: on_create
      loop:
        - name: Alice
          home: /home/Alice
          comment: Alice@example.com
          password: !vault |
            $ANSIBLE_VAULT;1.1;AES256
            39313031303666313035613665653565323463633031626566656437643531346630303462373839
            3466316463383236363262343261343065313966366335340a303633373932396666653539393230
            34363235623435306163613137396430363066396561643661666133323764323262376162316132
            6631383138363665340a333938303134653233326637303531663066356336653333613231373233
            3063
        - name: Bob
          home: /home/Bob
          comment: Bob@example.com
          password: !vault |
            $ANSIBLE_VAULT;1.1;AES256
            39313031303666313035613665653565323463633031626566656437643531346630303462373839
            3466316463383236363262343261343065313966366335340a303633373932396666653539393230
            34363235623435306163613137396430363066396561643661666133323764323262376162316132
            6631383138363665340a333938303134653233326637303531663066356336653333613231373233
            3063
        - name: Carol
          home: /home/Carol
          comment: Carol@example.com
          password: !vault |
            $ANSIBLE_VAULT;1.1;AES256
            39313031303666313035613665653565323463633031626566656437643531346630303462373839
            3466316463383236363262343261343065313966366335340a303633373932396666653539393230
            34363235623435306163613137396430363066396561643661666133323764323262376162316132
            6631383138363665340a333938303134653233326637303531663066356336653333613231373233
            3063

